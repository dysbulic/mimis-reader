(this["webpackJsonpmimis-reader"]=this["webpackJsonpmimis-reader"]||[]).push([[0],{124:function(e,t,n){"use strict";(function(e){var o=n(178),i=n(39),a=n(40),r=n(42),l=n(41),c=n(0),s=n.n(c),u=n(179),d=n(116),p=n.n(d),h=n(71);e.ePub=p.a;var f=function(e){Object(r.a)(n,e);var t=Object(l.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).onLocationChange=function(e){var t=o.props,n=t.location,i=t.locationChanged,a=e&&e.start;n!==a&&(o.location=a,i&&i(a))},o.handleKeyPress=function(e){var t=e.key;"ArrowRight"===t&&o.nextPage(),"ArrowLeft"===t&&o.prevPage()},o.state={isLoaded:!1,toc:[]},o.viewerRef=s.a.createRef(),o.location=e.location,o.book=o.rendition=o.prevPage=o.nextPage=null,o}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.initBook(!0),document.addEventListener("keyup",this.handleKeyPress,!1)}},{key:"initBook",value:function(){var e=this,t=this.props,n=t.url,o=t.tocChanged,i=t.epubInitOptions;this.book&&this.book.destroy(),this.book=new p.a(n,i),this.book.loaded.navigation.then((function(t){var n=t.toc;return e.setState({isLoaded:!0,toc:n},(function(){o&&o(n),e.initReader()}))}))}},{key:"componentWillUnmount",value:function(){this.book=this.rendition=this.prevPage=this.nextPage=null,document.removeEventListener("keyup",this.handleKeyPress,!1)}},{key:"shouldComponentUpdate",value:function(e){return!this.state.isLoaded||e.location!==this.props.location}},{key:"componentDidUpdate",value:function(e){var t;e.location!==this.props.location&&this.location!==this.props.location&&(null===(t=this.rendition)||void 0===t||t.display(this.props.location));e.url!==this.props.url&&this.initBook()}},{key:"initReader",value:function(){var e,t,n,i=this,a=this.state.toc,r=this.props,l=r.location,c=r.epubOptions,s=r.getRendition,u=this.viewerRef.current;if(!u)throw new Error("Couldn't Find Reference");if(this.rendition=this.book.renderTo(u,Object(o.a)({contained:!0,width:"100%",height:"100%"},c)),console.info("REND",this.rendition),this.prevPage=function(){i.rendition.prev()},this.nextPage=function(){i.rendition.next()},this.registerEvents(),null===s||void 0===s||s(this.rendition),["string","number"].includes(typeof l))null===(t=this.rendition)||void 0===t||null===(n=t.display)||void 0===n||n.call(t,l);else if(null===a||void 0===a||null===(e=a[0])||void 0===e?void 0:e.href){var d,p;null===(d=this.rendition)||void 0===d||null===(p=d.display)||void 0===p||p.call(d,a[0].href)}else{var h,f;null===(h=this.rendition)||void 0===h||null===(f=h.display)||void 0===f||f.call(h)}}},{key:"registerEvents",value:function(){var e=this.props,t=e.handleKeyPress,n=e.handleTextSelected;this.rendition.on("locationChanged",this.onLocationChange),this.rendition.on("keyup",null!==t&&void 0!==t?t:this.handleKeyPress),n&&this.rendition.on("selected",n)}},{key:"renderBook",value:function(){return s.a.createElement(u.a,{ref:this.viewerRef})}},{key:"render",value:function(){var e=this.state.isLoaded,t=this.props,n=t.loadingView;t.styles;return e&&this.renderBook()||n}}]),n}(c.Component);f.defaultProps={loadingView:null,locationChanged:null,tocChanged:null,styles:h.a,epubOptions:{},epubInitOptions:{}},t.a=f}).call(this,n(20))},165:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return C}));var o=n(6),i=n(39),a=n(40),r=n(42),l=n(41),c=n(0),s=n.n(c),u=n(166),d=n.n(u),p=n(121),h=n(295),f=n(119),g=n(89),b=n(30),m=n(90),v=n(296),y=n(120),x=n(180),E=n(179),k=n(86),w=n(177),O=(n(293),n(171)),j=n(172),T=e.localStorage||null,C=function(t){Object(r.a)(c,t);var n=Object(l.a)(c);function c(t){var a,r;return Object(i.a)(this,c),(r=n.call(this,t)).toggleFullscreen=function(){return r.setState({fullscreen:!r.state.fullscreen},(function(){setTimeout((function(){document.createEvent("UIEvents").initUIEvent("resize",!0,!1,e,0)}),1e3)}))},r.onLocationChanged=function(e){r.setState({location:e},(function(){var t;null===T||void 0===T||null===(t=T.setItem)||void 0===t||t.call(T,"epub-location",e)}))},r.onToggleFontSize=function(){var e=!r.state.largeText;r.setState({largeText:e},(function(){r.rendition.themes.fontSize(e?"140%":"100%")}))},r.getRendition=function(e){console.log("getRendition callback",e),r.rendition=e},r.handleChangeFile=function(e,t){if(t.length>0){var n=Object(o.a)(t[0],2),i=n[0],a=n[1];if("application/epub+zip"!==a.type)throw new Error("Unsupported Type: ".concat(a.type));r.setState({localFile:i.target.result,localName:a.name,location:null})}},r.state={fullscreen:!1,location:null!==(a=null===T||void 0===T?void 0:T.getItem("epub-location"))&&void 0!==a?a:2,localFile:null,localName:null,largeText:!1},r.rendition=null,r}return Object(a.a)(c,[{key:"render",value:function(){var e=this.state,t=e.fullscreen,n=e.location,o=e.localFile,i=e.localName;return s.a.createElement(p.a,null,s.a.createElement(h.a,{hidden:t},s.a.createElement(f.a,null,s.a.createElement(g.a,{href:"https://github.com/gerhardsletten/react-reader"},s.a.createElement(b.a.img,{w:"8rem",h:"8rem",src:O.a})),s.a.createElement(p.a,{mt:4},s.a.createElement(g.a,{href:"https://github.com/gerhardsletten/react-reader"},s.a.createElement(m.a,{fontSize:40},"React Reader")),s.a.createElement(g.a,{href:"https://github.com/futurepress/epub.js"},s.a.createElement(m.a,{fontSize:25,fontWeight:"normal"},"Powered by ePubJS"))),s.a.createElement(f.a,null,s.a.createElement(m.a,{fontSize:40},"w/"),s.a.createElement(g.a,{href:"https://github.com/dysbulic/mimis-reader"},s.a.createElement(f.a,null,s.a.createElement(m.a,{mt:4}," M\xefmis"),s.a.createElement(b.a.img,{w:"10rem",h:"8rem",src:j.a})))),s.a.createElement(v.a,null),s.a.createElement(p.a,{mt:30,mr:40},s.a.createElement(d.a,{as:"buffer",onChange:this.handleChangeFile},s.a.createElement(y.a,{fontSize:20},"Upload Epub",s.a.createElement(x.a,{as:k.b,ml:2.5}))),s.a.createElement(y.a,{fontSize:20,onClick:this.toggleFullscreen},"Hide Title",s.a.createElement(x.a,{as:k.a,ml:2.5}))))),s.a.createElement(E.a,{h:"calc(95vh - ".concat(t?0:5,"rem)")},s.a.createElement(w.b,{url:o||"/mimis-reader/RLT/opf.opf",title:i||"M. Scott Peck \u2013 The Road Less Traveled",location:n,locationChanged:this.onLocationChanged,getRendition:this.getRendition}),s.a.createElement(y.a,{opacity:.5,onClick:this.onToggleFontSize,position:"absolute",right:25,bottom:0,zIndex:20},"Toggle Font-Size")))}}]),c}(c.Component)}).call(this,n(20))},171:function(e,t,n){"use strict";t.a=n.p+"static/media/logo.e556df7d.svg"},172:function(e,t,n){"use strict";t.a=n.p+"static/media/m\xefmir.2a922d8c.svg"},177:function(e,t,n){"use strict";n.d(t,"a",(function(){return o.a})),n.d(t,"b",(function(){return y}));var o=n(124),i=(n(71),n(23)),a=n(39),r=n(40),l=n(42),c=n(41),s=n(87),u=n(0),d=n.n(u),p=n(168),h=n(120),f=n(121),g={container:{overflow:"hidden",height:"100%"},readerArea:{position:"relative",zIndex:1,height:"100%",width:"100%",backgroundColor:"#fff",transition:"all .3s ease"},containerExpanded:{transform:"translateX(256px)"},titleArea:{position:"absolute",top:20,left:50,right:50,textAlign:"center",color:"#999"},reader:{position:"absolute",top:50,left:50,bottom:20,right:50},swipeWrapper:{position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:200},prev:{left:1},next:{right:1},arrow:{outline:"none",border:"none",background:"none",position:"absolute",top:"50%",marginTop:-32,fontSize:64,padding:"0 10px",color:"#E2E2E2",fontFamily:"arial, sans-serif",cursor:"pointer",userSelect:"none",appearance:"none",fontWeight:"normal"},arrowHover:{color:"#777"},tocBackground:{position:"absolute",left:256,top:0,bottom:0,right:0,zIndex:1},tocArea:{position:"absolute",left:0,top:0,bottom:0,zIndex:0,width:256,overflowY:"auto",WebkitOverflowScrolling:"touch",background:"#f2f2f2",padding:"10px 0"},tocAreaButton:{userSelect:"none",appearance:"none",background:"none",border:"none",display:"block",fontFamily:"sans-serif",width:"100%",fontSize:".9em",textAlign:"left",padding:".9em 1em",borderBottom:"1px solid #ddd",color:"#aaa",boxSizing:"border-box",outline:"none",cursor:"pointer"},tocButton:{background:"none",border:"none",width:32,height:32,position:"absolute",top:10,left:10,borderRadius:2,outline:"none",cursor:"pointer"},tocButtonExpanded:{background:"#f2f2f2"},tocButtonBar:{position:"absolute",width:"60%",background:"#ccc",height:2,left:"50%",margin:"-1px -30%",top:"50%",transition:"all .5s ease"},tocButtonBarTop:{top:"35%"},tocButtonBottom:{top:"66%"},loadingView:{position:"absolute",top:"50%",left:"10%",right:"10%",color:"#ccc",textAlign:"center",margintop:"-.5em"}},b=function(e){var t=e.children,n=Object(s.a)(e,["children"]),o=Object(p.useSwipeable)(n);return d.a.createElement("div",o,t)},m=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).setLocation=function(){e.props.setLocation(e.props.href)},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.label,n=(e.setLocation,Object(s.a)(e,["label","setLocation"]));return d.a.createElement(h.a,Object.assign({onClick:this.setLocation},n),t)}}]),n}(u.PureComponent),v=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).toggleToc=function(){o.setState({expandedToc:!o.state.expandedToc})},o.next=function(){var e,t=o.readerRef.current;null===t||void 0===t||null===(e=t.nextPage)||void 0===e||e.call(t)},o.prev=function(){var e,t=o.readerRef.current;null===t||void 0===t||null===(e=t.prevPage)||void 0===e||e.call(t)},o.onTocChange=function(e){var t=o.props.tocChanged;o.setState({toc:e},(function(){return t&&t(e)}))},o.setLocation=function(e){var t=o.props.locationChanged;o.setState({expandedToc:!1},(function(){return t&&t(e)}))},o.readerRef=d.a.createRef(),o.state={expandedToc:!1,toc:!1},o}return Object(r.a)(n,[{key:"renderToc",value:function(){var e=this,t=this.state,n=t.toc,o=t.expandedToc,a=this.props.styles,r=this.props.renderToc?this.props.renderToc({toc:n,expanded:o,styles:a,setLocation:this.setLocation.bind(this)}):d.a.createElement(f.a,null,n.map((function(t){return[t].concat(Object(i.a)(t.subitems)).map((function(t,n){return d.a.createElement(m,Object.assign({key:n},t,{textAlign:"left",setLocation:e.setLocation}))}))})));return d.a.createElement("div",null,r,o&&d.a.createElement("div",{style:a.tocBackground,onClick:this.toggleToc}))}},{key:"renderTocToggle",value:function(){return d.a.createElement(h.a,{onClick:this.toggleToc})}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.showToc,i=e.loadingView,a=e.styles,r=e.locationChanged,l=e.swipeable,c=e.epubViewStyles,u=Object(s.a)(e,["title","showToc","loadingView","styles","locationChanged","swipeable","epubViewStyles"]),p=this.state,h=p.toc,f=p.expandedToc;return d.a.createElement("div",{style:a.container},d.a.createElement("div",{style:Object.assign({},a.readerArea,f?a.containerExpanded:{})},n&&this.renderTocToggle(),d.a.createElement("div",{style:a.titleArea},t),d.a.createElement(b,{onSwipedRight:this.prev,onSwipedLeft:this.next,trackMouse:!0},d.a.createElement("div",{style:a.reader},d.a.createElement(o.a,Object.assign({ref:this.readerRef,loadingView:i,styles:c},u,{tocChanged:this.onTocChange,locationChanged:r})),l&&d.a.createElement("div",{style:a.swipeWrapper}))),d.a.createElement("button",{style:Object.assign({},a.arrow,a.prev),onClick:this.prev},"\u2039"),d.a.createElement("button",{style:Object.assign({},a.arrow,a.next),onClick:this.next},"\u203a")),n&&h&&this.renderToc())}}]),n}(u.PureComponent);v.defaultProps={loadingView:d.a.createElement("div",{style:g.loadingView},"Loading\u2026"),locationChanged:null,tocChanged:null,showToc:!0,styles:g};var y=v},181:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),a=n(113),r=n(297),l=n(165);Object(a.render)(i.a.createElement(r.a,null,i.a.createElement(l.a,null)),document.getElementById("root"))},293:function(e,t,n){"use strict";var o=n(13),i=n(11),a=n(50);function r(){var e=Object(o.a)(["\n  position: fixed;\n  bottom: 1.5rem;\n  right: 1.5rem;\n  z-index: 10;\n  background: #eee;\n  border-radius: 2px;\n  padding: 0.5rem;\n"]);return r=function(){return e},e}function l(){var e=Object(o.a)(['\n  vertical-align: middle;\n  display: inline-block;\n  width: 2rem;\n  height: 2rem;\n  background: #666;\n  margin-left: 5px;\n  border-radius: 50%;\n  position: relative;\n  transform: rotate(45deg);\n  &:before,\n  &:after {\n    content: "";\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 60%;\n    height: 2px;\n    background: #fff;\n    margin-left: -30%;\n    margin-top: -1px;\n    border-radius: 1px;\n  }\n  &:after {\n    transform: rotate(-90deg);\n  }\n']);return l=function(){return e},e}function c(){var e=Object(o.a)(["\n    font-size: 16px;\n    \n  "]);return c=function(){return e},e}function s(){var e=Object(o.a)(["\n  color: #808080;\n  font-size: 12px;\n  display: inline-block;\n  margin-left: 1rem;\n  ",";\n"]);return s=function(){return e},e}function u(){var e=Object(o.a)(["\n  font-family: inherit;\n  font-size: inherit;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  user-select: none;\n  appearance: none;\n  background: none;\n"]);return u=function(){return e},e}function d(){var e=Object(o.a)(["\n    width: 330px;\n    height: 104px;\n    display: inline-block;\n    margin-left: 2px;\n  "]);return d=function(){return e},e}function p(){var e=Object(o.a)(["\n  width: 250px;\n  height: auto;\n  display: block;\n  margin: 0 auto 0px;\n  ",";\n"]);return p=function(){return e},e}function h(){var e=Object(o.a)(["\n    margin-right: auto;\n  "]);return h=function(){return e},e}function f(){var e=Object(o.a)(["\n  ",";\n"]);return f=function(){return e},e}function g(){var e=Object(o.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: baseline;\n    padding-top: 0.5rem;\n  "]);return g=function(){return e},e}function b(){var e=Object(o.a)(["\n  ",";\n"]);return b=function(){return e},e}function m(){var e=Object(o.a)(["\n    display: flex;\n    align-items: flex-end;\n  "]);return m=function(){return e},e}function v(){var e=Object(o.a)(["\n  position: absolute;\n  top: 10px;\n  left: 20px;\n  right: 20px;\n\n  ",";\n"]);return v=function(){return e},e}function y(){var e=Object(o.a)(["\n  font-size: 16px;\n  position: absolute;\n  top: ","px;\n  left: ","rem;\n  right: ","rem;\n  bottom: ","rem;\n  transition: all 0.6s ease;\n  ",";\n"]);return y=function(){return e},e}function x(){var e=Object(o.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  min-height: 100vh;\n  background: linear-gradient(to bottom, #f2f2f2 0%, #333 100%);\n  overflow: hidden;\n"]);return x=function(){return e},e}i.b.div(x()),i.b.div(y(),(function(e){return e.fullscreen?0:135}),(function(e){return e.fullscreen?0:1}),(function(e){return e.fullscreen?0:1}),(function(e){return e.fullscreen?0:1}),(function(e){return!e.fullscreen&&"0 0 5px rgba(0,0,0,.3);"})),i.b.header(v(),Object(a.a)("tablet")(m())),i.b.div(b(),Object(a.a)("mobile")(g())),i.b.a(f(),Object(a.a)("tablet")(h())),i.b.img(p(),Object(a.a)("tablet")(d()));var E=i.b.button(u());Object(i.b)(E)(s(),Object(a.a)("tablet")(c())),i.b.i(l()),Object(i.b)(E)(r())},71:function(e,t,n){"use strict";t.a={viewHolder:{position:"relative",height:"100%",width:"100%"},view:{height:"100%"}}}},[[181,1,2]]]);
//# sourceMappingURL=main.69b0cc6c.chunk.js.map