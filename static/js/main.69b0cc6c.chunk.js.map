{"version":3,"sources":["modules/EpubView/EpubView.jsx","App.js","logo.svg","mïmir.svg","modules/ReactReader/style.js","modules/ReactReader/ReactReader.jsx","index.js","Components.js","modules/EpubView/style.js"],"names":["global","ePub","Epub","EpubView","props","onLocationChange","loc","location","locationChanged","newLocation","start","handleKeyPress","key","nextPage","prevPage","state","isLoaded","toc","viewerRef","React","createRef","book","rendition","this","initBook","document","addEventListener","url","tocChanged","epubInitOptions","destroy","loaded","navigation","then","setState","initReader","removeEventListener","nextProps","prevProps","display","epubOptions","getRendition","node","current","Error","renderTo","contained","width","height","console","info","prev","next","registerEvents","includes","href","handleTextSelected","on","ref","loadingView","styles","renderBook","Component","defaultProps","defaultStyles","storage","localStorage","App","toggleFullscreen","fullscreen","setTimeout","createEvent","initUIEvent","onLocationChanged","setItem","onToggleFontSize","nextState","largeText","themes","fontSize","log","handleChangeFile","event","results","length","e","file","type","localFile","target","result","localName","name","getItem","hidden","img","w","h","src","logo","mt","fontWeight","mïmir","mr","as","onChange","BiUpload","ml","onClick","BiExpand","title","opacity","position","right","bottom","zIndex","reactReaderStyles","container","overflow","readerArea","backgroundColor","transition","containerExpanded","transform","titleArea","top","left","textAlign","color","reader","swipeWrapper","arrow","outline","border","background","marginTop","padding","fontFamily","cursor","userSelect","appearance","arrowHover","tocBackground","tocArea","overflowY","WebkitOverflowScrolling","tocAreaButton","borderBottom","boxSizing","tocButton","borderRadius","tocButtonExpanded","tocButtonBar","margin","tocButtonBarTop","tocButtonBottom","margintop","Swipeable","children","handlers","useSwipeable","TocItem","setLocation","label","PureComponent","ReactReader","toggleToc","expandedToc","readerRef","onTocChange","tocDOM","renderToc","expanded","bind","map","item","subitems","child","i","style","showToc","swipeable","epubViewStyles","Object","assign","renderTocToggle","onSwipedRight","onSwipedLeft","trackMouse","render","getElementById","styled","div","header","breakpoint","a","Button","button","viewHolder","view"],"mappings":"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","file":"static/js/main.69b0cc6c.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { Box } from '@chakra-ui/react'\nimport Epub from 'epubjs/lib/index'\nimport defaultStyles from './style'\n\nglobal.ePub = Epub // Fix for v3 branch of epub.js -> needs ePub to by a global var\n\nclass EpubView extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isLoaded: false,\n      toc: []\n    }\n    this.viewerRef = React.createRef()\n    this.location = props.location\n    this.book = this.rendition = (\n      this.prevPage = this.nextPage = null\n    )\n  }\n\n  componentDidMount() {\n    this.initBook(true)\n    document.addEventListener(\n      'keyup', this.handleKeyPress, false\n    )\n  }\n\n  initBook() {\n    const {\n      url, tocChanged, epubInitOptions,\n    } = this.props\n\n    if(this.book) {\n      this.book.destroy()\n    }\n\n    this.book = new Epub(url, epubInitOptions)\n    this.book.loaded.navigation.then(({ toc }) => (\n      this.setState(\n        {\n          isLoaded: true,\n          toc: toc\n        },\n        () => {\n          tocChanged && tocChanged(toc)\n          this.initReader()\n        }\n      )\n    ))\n  }\n\n  componentWillUnmount() {\n    this.book = this.rendition = (\n      this.prevPage = this.nextPage = null\n    )\n    document.removeEventListener(\n      'keyup', this.handleKeyPress, false\n    )\n  }\n\n  shouldComponentUpdate(nextProps) {\n    return (\n      !this.state.isLoaded\n      || nextProps.location !== this.props.location\n    )\n  }\n\n  componentDidUpdate(prevProps) {\n    if(\n      prevProps.location !== this.props.location\n      && this.location !== this.props.location\n    ) {\n      this.rendition?.display(this.props.location)\n    }\n    if(prevProps.url !== this.props.url) {\n      this.initBook()\n    }\n  }\n\n  initReader() {\n    const { toc } = this.state\n    const {\n      location, epubOptions, getRendition,\n    } = this.props\n    const node = this.viewerRef.current\n\n    if(!node) throw new Error(\"Couldn't Find Reference\")\n\n    this.rendition = this.book.renderTo(\n      node, {\n        contained: true,\n        width: '100%',\n        height: '100%',\n        ...epubOptions\n      }\n    )\n\n    console.info('REND', this.rendition)\n\n    this.prevPage = () => {\n      this.rendition.prev()\n    }\n    this.nextPage = () => {\n      this.rendition.next()\n    }\n    this.registerEvents()\n    getRendition?.(this.rendition)\n\n    if(['string', 'number'].includes(typeof location)) {\n      this.rendition?.display?.(location)\n    } else if(toc?.[0]?.href) {\n      this.rendition?.display?.(toc[0].href)\n    } else {\n      this.rendition?.display?.()\n    }\n  }\n\n  registerEvents() {\n    const { handleKeyPress, handleTextSelected } = this.props\n    this.rendition.on('locationChanged', this.onLocationChange)\n    this.rendition.on(\n      'keyup', handleKeyPress ?? this.handleKeyPress\n    )\n    if(handleTextSelected) {\n      this.rendition.on('selected', handleTextSelected)\n    }\n  }\n\n  onLocationChange = (loc) => {\n    const { location, locationChanged } = this.props\n    const newLocation = loc && loc.start\n    if(location !== newLocation) {\n      this.location = newLocation\n      locationChanged && locationChanged(newLocation)\n    }\n  }\n\n  renderBook() {\n   return <Box ref={this.viewerRef}/>\n  }\n\n  handleKeyPress = ({ key }) => {\n    key === 'ArrowRight' && this.nextPage()\n    key === 'ArrowLeft' && this.prevPage()\n  }\n\n  render() {\n    const { isLoaded } = this.state\n    const { loadingView, styles } = this.props\n    return (\n      (isLoaded && this.renderBook()) || loadingView\n    )\n  }\n}\n\nEpubView.defaultProps = {\n  loadingView: null,\n  locationChanged: null,\n  tocChanged: null,\n  styles: defaultStyles,\n  epubOptions: {},\n  epubInitOptions: {}\n}\n\nEpubView.propTypes = {\n  url: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.instanceOf(ArrayBuffer)\n  ]),\n  loadingView: PropTypes.element,\n  location: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  locationChanged: PropTypes.func,\n  tocChanged: PropTypes.func,\n  styles: PropTypes.object,\n  epubInitOptions: PropTypes.object,\n  epubOptions: PropTypes.object,\n  getRendition: PropTypes.func,\n  handleKeyPress: PropTypes.func,\n  handleTextSelected: PropTypes.func\n}\n\nexport default EpubView\n","import React, { Component } from 'react'\nimport FileReaderInput from 'react-file-reader-input'\nimport {\n  chakra, Box, Heading, Link, Stack, Text, Flex, Button,\n  Spacer, Icon,\n} from '@chakra-ui/react'\nimport { BiExpand, BiUpload } from 'react-icons/bi'\nimport { ReactReader } from './modules'\nimport {\n  //Container,\n  //ReaderContainer,\n  //Bar,\n  //LogoWrapper,\n  //Logo,\n  //GenericButton,\n  CloseIcon,\n  //FontSizeButton,\n  //ButtonWrapper,\n} from './Components'\nimport logo from './logo.svg'\nimport mïmir from './mïmir.svg'\n\nconst storage = global.localStorage || null\n\nconst DEMO_URL = '/mimis-reader/RLT/opf.opf'\nconst DEMO_NAME = 'M. Scott Peck – The Road Less Traveled'\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      fullscreen: false,\n      location: storage?.getItem('epub-location') ?? 2,\n      localFile: null,\n      localName: null,\n      largeText: false,\n    }\n    this.rendition = null\n  }\n\n  toggleFullscreen = () => (\n    this.setState(\n      { fullscreen: !this.state.fullscreen },\n      () => {\n        setTimeout(() => {\n          const evt = document.createEvent('UIEvents')\n          evt.initUIEvent('resize', true, false, global, 0)\n        }, 1000)\n      }\n    )\n  )\n\n  onLocationChanged = (location) => {\n    this.setState(\n      { location },\n      () => {\n        storage?.setItem?.('epub-location', location)\n      }\n    )\n  }\n\n  onToggleFontSize = () => {\n    const nextState = !this.state.largeText\n    this.setState(\n      { largeText: nextState },\n      () => {\n        this.rendition.themes.fontSize(\n          nextState ? '140%' : '100%'\n        )\n      }\n    )\n  }\n\n  getRendition = (rendition) => {\n    console.log('getRendition callback', rendition)\n    // Set inital font-size, and add a pointer to rendition for later updates\n    //const { largeText } = this.state\n    this.rendition = rendition\n    //rendition.themes.fontSize(largeText ? '140%' : '100%')\n  }\n\n  handleChangeFile = (event, results) => {\n    if(results.length > 0) {\n      const [e, file] = results[0]\n      if(file.type !== 'application/epub+zip') {\n        throw new Error(`Unsupported Type: ${file.type}`)\n      }\n      this.setState({\n        localFile: e.target.result,\n        localName: file.name,\n        location: null,\n      })\n    }\n  }\n\n  render() {\n    const {\n      fullscreen, location, localFile, localName\n    } = this.state\n    return (\n      <Stack>\n        <Heading hidden={fullscreen}>\n          <Flex>\n            <Link href=\"https://github.com/gerhardsletten/react-reader\">\n              <chakra.img w=\"8rem\" h=\"8rem\" src={logo}/>\n            </Link>\n            <Stack mt={4}>\n              <Link href=\"https://github.com/gerhardsletten/react-reader\">\n                <Text fontSize={40}>React Reader</Text>\n              </Link>\n              <Link href=\"https://github.com/futurepress/epub.js\">\n                <Text fontSize={25} fontWeight=\"normal\">\n                  Powered by ePubJS\n                </Text>\n              </Link>\n            </Stack>\n            <Flex>\n              <Text fontSize={40}>w/</Text>\n              <Link href=\"https://github.com/dysbulic/mimis-reader\">\n                <Flex>\n                  <Text mt={4}> Mïmis</Text>\n                  <chakra.img w=\"10rem\" h=\"8rem\" src={mïmir}/>\n                </Flex>\n              </Link>\n            </Flex>\n            <Spacer/>\n            <Stack mt={30} mr={40}>\n              <FileReaderInput as=\"buffer\" onChange={this.handleChangeFile}>\n                <Button fontSize={20}>\n                  Upload Epub\n                  <Icon as={BiUpload} ml={2.5}/>\n                </Button>\n              </FileReaderInput>\n              <Button fontSize={20} onClick={this.toggleFullscreen}>\n                Hide Title\n                <Icon as={BiExpand} ml={2.5}/>\n              </Button>\n            </Stack>\n          </Flex>\n        </Heading>\n        <Box h={`calc(95vh - ${fullscreen ? 0 : 5}rem)`}>\n          <ReactReader\n            url={localFile || DEMO_URL}\n            title={localName || DEMO_NAME}\n            location={location}\n            locationChanged={this.onLocationChanged}\n            getRendition={this.getRendition}\n          />\n          <Button\n            opacity={0.5}\n            onClick={this.onToggleFontSize}\n            position=\"absolute\"\n            right={25} bottom={0}\n            zIndex={20}\n          >\n            Toggle Font-Size\n          </Button>\n        </Box>\n      </Stack>\n    )\n  }\n}","export default __webpack_public_path__ + \"static/media/logo.e556df7d.svg\";","export default __webpack_public_path__ + \"static/media/mïmir.2a922d8c.svg\";","const reactReaderStyles = {\n  container: {\n    overflow: \"hidden\",\n    height: \"100%\"\n  },\n  readerArea: {\n    position: \"relative\",\n    zIndex: 1,\n    height: \"100%\",\n    width: \"100%\",\n    backgroundColor: \"#fff\",\n    transition: \"all .3s ease\"\n  },\n  containerExpanded: {\n    transform: \"translateX(256px)\"\n  },\n  titleArea: {\n    position: \"absolute\",\n    top: 20,\n    left: 50,\n    right: 50,\n    textAlign: \"center\",\n    color: \"#999\"\n  },\n  reader: {\n    position: \"absolute\",\n    top: 50,\n    left: 50,\n    bottom: 20,\n    right: 50\n  },\n  swipeWrapper: {\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n    zIndex: 200\n  },\n  prev: {\n    left: 1\n  },\n  next: {\n    right: 1\n  },\n  arrow: {\n    outline: \"none\",\n    border: \"none\",\n    background: \"none\",\n    position: \"absolute\",\n    top: \"50%\",\n    marginTop: -32,\n    fontSize: 64,\n    padding: \"0 10px\",\n    color: \"#E2E2E2\",\n    fontFamily: \"arial, sans-serif\",\n    cursor: \"pointer\",\n    userSelect: \"none\",\n    appearance: \"none\",\n    fontWeight: \"normal\"\n  },\n  arrowHover: {\n    color: \"#777\"\n  },\n  tocBackground: {\n    position: \"absolute\",\n    left: 256,\n    top: 0,\n    bottom: 0,\n    right: 0,\n    zIndex: 1\n  },\n  tocArea: {\n    position: \"absolute\",\n    left: 0,\n    top: 0,\n    bottom: 0,\n    zIndex: 0,\n    width: 256,\n    overflowY: \"auto\",\n    WebkitOverflowScrolling: \"touch\",\n    background: \"#f2f2f2\",\n    padding: \"10px 0\"\n  },\n  tocAreaButton: {\n    userSelect: \"none\",\n    appearance: \"none\",\n    background: \"none\",\n    border: \"none\",\n    display: \"block\",\n    fontFamily: \"sans-serif\",\n    width: \"100%\",\n    fontSize: \".9em\",\n    textAlign: \"left\",\n    padding: \".9em 1em\",\n    borderBottom: \"1px solid #ddd\",\n    color: \"#aaa\",\n    boxSizing: \"border-box\",\n    outline: \"none\",\n    cursor: \"pointer\"\n  },\n  tocButton: {\n    background: \"none\",\n    border: \"none\",\n    width: 32,\n    height: 32,\n    position: \"absolute\",\n    top: 10,\n    left: 10,\n    borderRadius: 2,\n    outline: \"none\",\n    cursor: \"pointer\"\n  },\n  tocButtonExpanded: {\n    background: \"#f2f2f2\"\n  },\n  tocButtonBar: {\n    position: \"absolute\",\n    width: \"60%\",\n    background: \"#ccc\",\n    height: 2,\n    left: \"50%\",\n    margin: \"-1px -30%\",\n    top: \"50%\",\n    transition: \"all .5s ease\"\n  },\n  tocButtonBarTop: {\n    top: \"35%\"\n  },\n  tocButtonBottom: {\n    top: \"66%\"\n  },\n  loadingView: {\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"10%\",\n    right: \"10%\",\n    color: \"#ccc\",\n    textAlign: \"center\",\n    margintop: \"-.5em\"\n  }\n};\n\nexport default reactReaderStyles\n","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport { useSwipeable } from 'react-swipeable'\nimport { Button, Icon, Stack } from '@chakra-ui/react'\nimport { BiCollection } from 'react-icons/bi'\nimport { EpubView } from '..'\nimport defaultStyles from './style'\n\nconst Swipeable = ({children, ...props}) => {\n  const handlers = useSwipeable(props)\n  return (<div { ...handlers }>{children}</div>)\n}\n\nclass TocItem extends PureComponent {\n  setLocation = () => {\n    this.props.setLocation(this.props.href)\n  }\n\n  render() {\n    const { label, setLocation, ...props } = this.props\n    return (\n      <Button onClick={this.setLocation} {...props}>\n        {label}\n      </Button>\n    )\n  }\n}\n\nTocItem.propTypes = {\n  label: PropTypes.string,\n  href: PropTypes.string,\n  setLocation: PropTypes.func,\n  styles: PropTypes.object\n}\n\nclass ReactReader extends PureComponent {\n  constructor(props) {\n    super(props)\n    this.readerRef = React.createRef()\n    this.state = {\n      expandedToc: false,\n      toc: false,\n    }\n  }\n\n  toggleToc = () => {\n    this.setState({\n      expandedToc: !this.state.expandedToc\n    })\n  }\n\n  next = () => {\n    const node = this.readerRef.current\n    node?.nextPage?.()\n  }\n\n  prev = () => {\n    const node = this.readerRef.current\n    node?.prevPage?.()\n  }\n\n  onTocChange = (toc) => {\n    const { tocChanged } = this.props\n    this.setState(\n      {\n        toc: toc\n      },\n      () => tocChanged && tocChanged(toc)\n    )\n  }\n\n  renderToc() {\n    const { toc, expandedToc } = this.state\n    const { styles } = this.props\n\n    const tocDOM = (this.props.renderToc) ? (\n      this.props.renderToc({\n        toc, expanded: expandedToc, styles,\n        setLocation: this.setLocation.bind(this),\n      })\n    ) : (\n      <Stack>\n        {toc.map((item) => (\n          [item, ...item.subitems].map((child, i) => (\n            <TocItem\n              key={i} {...child}\n              textAlign=\"left\"\n              setLocation={this.setLocation}\n            />\n          ))\n        ))}\n      </Stack>\n    )\n    return (\n      <div>\n        {tocDOM}\n        {expandedToc && (\n          <div style={styles.tocBackground} onClick={this.toggleToc} />\n        )}\n      </div>\n    )\n  }\n\n  setLocation = (loc) => {\n    const { locationChanged } = this.props\n    this.setState(\n      {\n        expandedToc: false\n      },\n      () => locationChanged && locationChanged(loc)\n    )\n  }\n\n  renderTocToggle() {\n    return (\n      <Button onClick={this.toggleToc}>\n        {/* <HamburgerMenu/> */}\n      </Button>\n    )\n  }\n\n  render() {\n    const {\n      title,\n      showToc,\n      loadingView,\n      styles,\n      locationChanged,\n      swipeable,\n      epubViewStyles,\n      ...props\n    } = this.props\n    const { toc, expandedToc } = this.state\n    return (\n      <div style={styles.container}>\n        <div\n          style={Object.assign(\n            {},\n            styles.readerArea,\n            expandedToc ? styles.containerExpanded : {}\n          )}\n        >\n          {showToc && this.renderTocToggle()}\n          <div style={styles.titleArea}>{title}</div>\n          <Swipeable\n            onSwipedRight={this.prev}\n            onSwipedLeft={this.next}\n            trackMouse\n          >\n            <div style={styles.reader}>\n              <EpubView\n                ref={this.readerRef}\n                loadingView={loadingView}\n                styles={epubViewStyles}\n                {...props}\n                tocChanged={this.onTocChange}\n                locationChanged={locationChanged}\n              />\n              {swipeable && <div style={styles.swipeWrapper} />}\n            </div>\n          </Swipeable>\n          <button\n            style={Object.assign({}, styles.arrow, styles.prev)}\n            onClick={this.prev}\n          >\n            ‹\n          </button>\n          <button\n            style={Object.assign({}, styles.arrow, styles.next)}\n            onClick={this.next}\n          >\n            ›\n          </button>\n        </div>\n        {showToc && toc && this.renderToc()}\n      </div>\n    )\n  }\n}\n\nReactReader.defaultProps = {\n  loadingView: <div style={defaultStyles.loadingView}>Loading…</div>,\n  locationChanged: null,\n  tocChanged: null,\n  showToc: true,\n  styles: defaultStyles\n}\n\nReactReader.propTypes = {\n  title: PropTypes.string,\n  loadingView: PropTypes.element,\n  showToc: PropTypes.bool,\n  locationChanged: PropTypes.func,\n  tocChanged: PropTypes.func,\n  styles: PropTypes.object,\n  epubViewStyles: PropTypes.object,\n  swipeable: PropTypes.bool\n}\n\nexport default ReactReader\n","import React from 'react'\nimport { render } from 'react-dom'\nimport { ChakraProvider } from '@chakra-ui/react'\nimport App from './App'\n\nrender(\n  <ChakraProvider>\n    <App />\n  </ChakraProvider>,\n  document.getElementById('root')\n)\n","import styled from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\n\nexport const Container = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100%;\n  min-height: 100vh;\n  background: linear-gradient(to bottom, #f2f2f2 0%, #333 100%);\n  overflow: hidden;\n`;\nexport const ReaderContainer = styled.div`\n  font-size: 16px;\n  position: absolute;\n  top: ${props => (props.fullscreen ? 0 : 135)}px;\n  left: ${props => (props.fullscreen ? 0 : 1)}rem;\n  right: ${props => (props.fullscreen ? 0 : 1)}rem;\n  bottom: ${props => (props.fullscreen ? 0 : 1)}rem;\n  transition: all 0.6s ease;\n  ${props => !props.fullscreen && \"0 0 5px rgba(0,0,0,.3);\"};\n`;\nexport const Bar = styled.header`\n  position: absolute;\n  top: 10px;\n  left: 20px;\n  right: 20px;\n\n  ${breakpoint(\"tablet\")`\n    display: flex;\n    align-items: flex-end;\n  `};\n`;\nexport const ButtonWrapper = styled.div`\n  ${breakpoint(\"mobile\")`\n    display: flex;\n    justify-content: center;\n    align-items: baseline;\n    padding-top: 0.5rem;\n  `};\n`;\nexport const LogoWrapper = styled.a`\n  ${breakpoint(\"tablet\")`\n    margin-right: auto;\n  `};\n`;\nexport const Logo = styled.img`\n  width: 250px;\n  height: auto;\n  display: block;\n  margin: 0 auto 0px;\n  ${breakpoint(\"tablet\")`\n    width: 330px;\n    height: 104px;\n    display: inline-block;\n    margin-left: 2px;\n  `};\n`;\nconst Button = styled.button`\n  font-family: inherit;\n  font-size: inherit;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  user-select: none;\n  appearance: none;\n  background: none;\n`;\nexport const GenericButton = styled(Button)`\n  color: #808080;\n  font-size: 12px;\n  display: inline-block;\n  margin-left: 1rem;\n  ${breakpoint(\"tablet\")`\n    font-size: 16px;\n    \n  `};\n`;\nexport const CloseIcon = styled.i`\n  vertical-align: middle;\n  display: inline-block;\n  width: 2rem;\n  height: 2rem;\n  background: #666;\n  margin-left: 5px;\n  border-radius: 50%;\n  position: relative;\n  transform: rotate(45deg);\n  &:before,\n  &:after {\n    content: \"\";\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 60%;\n    height: 2px;\n    background: #fff;\n    margin-left: -30%;\n    margin-top: -1px;\n    border-radius: 1px;\n  }\n  &:after {\n    transform: rotate(-90deg);\n  }\n`;\nexport const FontSizeButton = styled(Button)`\n  position: fixed;\n  bottom: 1.5rem;\n  right: 1.5rem;\n  z-index: 10;\n  background: #eee;\n  border-radius: 2px;\n  padding: 0.5rem;\n`;\n","const epubViewStyles = {\n  viewHolder: {\n    position: \"relative\",\n    height: \"100%\",\n    width: \"100%\"\n  },\n  view: {\n    height: \"100%\"\n  }\n};\n\nexport default epubViewStyles\n"],"sourceRoot":""}